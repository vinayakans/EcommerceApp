<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head th:replace="~{fragments::headers}">

    </head>
	<body>
		<!-- HEADER -->
		<header>
			<!-- TOP HEADER -->
			<div th:replace="~{fragments::header}"></div>
			<!-- /TOP HEADER -->
		</header>
		<!-- /HEADER -->

		<!-- NAVIGATION -->
		<nav id="navigation">
			<!-- container -->
			<div class="container">
				<!-- responsive-nav -->
				<div id="responsive-nav">
					<!-- NAV -->
					<ul class="main-nav nav navbar-nav">
						<li class="active"><a th:href="@{/index}">Home</a></li>
						<li><a href="#"th:href="@{/store-page}">Smartphones</a></li>
					</ul>
					<!-- /NAV -->
				</div>
				<!-- /responsive-nav -->
			</div>
			<!-- /container -->
		</nav>
		<!-- /NAVIGATION -->

		<!-- BREADCRUMB -->
		<div id="breadcrumb" class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<div class="col-md-12">
						<ul class="breadcrumb-tree">
							<li><a href="#">Home</a></li>

							<li><a href="#">Accessories</a></li>

						</ul>
					</div>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /BREADCRUMB -->

		<!-- SECTION -->
		<div class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<!-- Product main img -->
					<div class="col-md-5 col-md-push-2">
						<div id="product-main-img">
							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[0].getName()}|}" alt="">
							</div>

							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[1].getName()}|}" alt="">
							</div>

							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[2].getName()}|}" alt="">
							</div>

							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[3].getName()}|}" alt="">
							</div>
						</div>
					</div>
					<!-- /Product main img -->

					<!-- Product thumb imgs -->
					<div class="col-md-2  col-md-pull-5">
						<div id="product-imgs">
							<div class="product-preview" >
								<img th:src="@{|/img/images/${product.productImage[0].getName()}|}" alt="">
							</div>

							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[1].getName()}|}" alt="">
							</div>

							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[2].getName()}|}" alt="">
							</div>

							<div class="product-preview">
								<img th:src="@{|/img/images/${product.productImage[3].getName()}|}" alt="">
							</div>
						</div>
					</div>
					<!-- /Product thumb imgs -->

					<!-- Product details -->
					<div class="col-md-5">
						<div class="product-details">
							<h2 class="product-name" th:text="${product.name}">product name goes here</h2>
							<div>
								<div class="product-rating">
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star-o"></i>
								</div>
								<a class="review-link" href="#">[(${productReviewList.size()})] | Add your review</a>
							</div>
							<div>
								<h3 class="product-price" th:text="${product.costPrice}">$980.00 <del class="product-old-price">$990.00</del></h3>
								<span class="product-available">In Stock</span>
							</div>
							<p th:text="${product.description}">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

							<div class="add-to-cart">
<!--								<div class="qty-label">-->
<!--									Qty-->
<!--									<div class="input-number">-->
<!--										<input type="number">-->
<!--										<span class="qty-up">+</span>-->
<!--										<span class="qty-down">-</span>-->
<!--									</div>-->
<!--								</div>-->
								<form th:action="@{/add-to-cart}" method="post">
									<input type="hidden" th:value="${product.id}" name="id">
								<button type="submit" class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
								</form>
							</div>

							<ul class="product-btns">
								<li><a href="#"><i class="fa fa-heart-o"></i> add to wishlist</a></li>
								<li><a href="#"><i class="fa fa-exchange"></i> add to compare</a></li>
							</ul>

							<ul class="product-links">
								<li th:text="${product.category.name}"></li>
							</ul>

<!--							<ul class="product-links">-->
<!--								<li>Share:</li>-->
<!--								<li><a href="#"><i class="fa fa-facebook"></i></a></li>-->
<!--								<li><a href="#"><i class="fa fa-twitter"></i></a></li>-->
<!--								<li><a href="#"><i class="fa fa-google-plus"></i></a></li>-->
<!--								<li><a href="#"><i class="fa fa-envelope"></i></a></li>-->
<!--							</ul>-->

						</div>
					</div>
					<!-- /Product details -->
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /SECTION -->
		<!--COMMENT SECTION-->
		<section style="background-color: #eee;">
			<div class="container my-5 py-5">
				<div class="row d-flex justify-content-center">
					<div class="col-md-12 col-lg-10 col-xl-8">
						<div class="card" >
							<div th:each="productReview:${productReviewList}">
									<div class="card-body" >
										<div class="d-flex flex-start align-items-center">
											<img class="rounded-circle shadow-1-strong me-3"
												 height="60" />
											<div>
												<h6 class="fw-bold text-primary mb-1"th:text="${productReview.customer.firstName}"></h6>
												<p class="text-muted small mb-0" th:text="${date}">
												</p>
											</div>
										</div>
											<h3>Comments</h3>
											<h5 class="fw-bold" th:text="${productReview.review}"></h5>
											<p>Rating</p>
											<p class="mt-3 mb-4 pb-2"th:text="${productReview.rating}"></p>
							        </div>
							</div>
							<div th:if="${user == true}">
								<form th:action="@{/add-review}" method="post" class="comment">
								<div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">
									<div class="d-flex flex-start w-100">
										<input type="hidden" name="product_id" id="product_id" th:value="${product.id}">
										<img class="rounded-circle shadow-1-strong me-3"
											 height="40" />
										<div class="form-outline w-100">
											<input type="number" id="rating" name="rating" min="1" max="5" step=".5">
											<label for="rating">Rating</label>
											<textarea class="form-control" id="textAreaExample" name="textAreaExample" rows="4" style="background: #fff;"></textarea>
											<label class="form-label" for="textAreaExample">Review</label>
										</div>
									</div>
									<div class="float-end mt-2 pt-1">
										<button type="submit" class="btn btn-primary btn-sm">Post comment</button>
										<button type="button" class="btn btn-outline-primary btn-sm">Cancel</button>
									</div>
								</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!--/COMMENT SECTION-->
		<!-- NEWSLETTER -->
		<div id="newsletter" class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<div class="col-md-12">
						<div class="newsletter">
							<p>Sign Up for the <strong>NEWSLETTER</strong></p>
							<form>
								<input class="input" type="email" placeholder="Enter Your Email">
								<button class="newsletter-btn"><i class="fa fa-envelope"></i> Subscribe</button>
							</form>
							<ul class="newsletter-follow">
								<li>
									<a href="#"><i class="fa fa-facebook"></i></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-twitter"></i></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-instagram"></i></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-pinterest"></i></a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /NEWSLETTER -->

		<!-- FOOTER -->
		<footer id="footer">
			<!-- top footer -->
			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">About Us</h3>
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut.</p>
								<ul class="footer-links">
									<li><a href="#"><i class="fa fa-map-marker"></i>1734 Stonecoal Road</a></li>
									<li><a href="#"><i class="fa fa-phone"></i>+021-95-51-84</a></li>
									<li><a href="#"><i class="fa fa-envelope-o"></i>email@email.com</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Categories</h3>
								<ul class="footer-links">
									<li><a href="#">Hot deals</a></li>
									<li><a href="#">Laptops</a></li>
									<li><a href="#">Smartphones</a></li>
									<li><a href="#">Cameras</a></li>
									<li><a href="#">Accessories</a></li>
								</ul>
							</div>
						</div>

						<div class="clearfix visible-xs"></div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Information</h3>
								<ul class="footer-links">
									<li><a href="#">About Us</a></li>
									<li><a href="#">Contact Us</a></li>
									<li><a href="#">Privacy Policy</a></li>
									<li><a href="#">Orders and Returns</a></li>
									<li><a href="#">Terms & Conditions</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Service</h3>
								<ul class="footer-links">
									<li><a href="#">My Account</a></li>
									<li><a href="#">View Cart</a></li>
									<li><a href="#">Wishlist</a></li>
									<li><a href="#">Track My Order</a></li>
									<li><a href="#">Help</a></li>
								</ul>
							</div>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->

			<!-- bottom footer -->
			<div id="bottom-footer" class="section">
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-12 text-center">
							<ul class="footer-payments">
								<li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
								<li><a href="#"><i class="fa fa-credit-card"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
							</ul>
							<span class="copyright">
								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							</span>
						</div>
					</div>
						<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /bottom footer -->
		</footer>
		<!-- /FOOTER -->
		<script>
			// Select the form element
			const form = $('.comment');
			form.submit(function (event) {
				event.preventDefault(); // Prevent the default form submission

				// Serialize the form data
				const formData = form.serialize();

				// Define the URL to send the POST request to
				const url = '/add-review';

				// Send the POST request using jQuery's $.ajax
				$.ajax({
					type: 'POST',
					url: url,
					data: formData,
					success: function (response) {
						// Redirect to a new page or handle success as needed
						window.location.href = '/success-page'; // Replace with your success page URL
					},
					error: function (error) {
						console.error('Error:', error.statusText);
						// Handle errors if the request fails
						// Display an error message to the user if needed
					},
				});
			});

		</script>

		<!-- jQuery Plugins -->
		<script th:src="@{/js/jquery.min.js}"></script>
		<script th:src="@{/js/bootstrap.min.js}"></script>
		<script th:src="@{/js/slick.min.js}"></script>
		<script th:src="@{/js/nouislider.min.js}"></script>
		<script th:src="@{/js/jquery.zoom.min.js}"></script>
		<script th:src="@{/js/main.js}"></script>

	</body>
</html>
